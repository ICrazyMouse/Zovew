require=function t(e,c,n){function i(a,s){if(!c[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var r=c[a]={exports:{}};e[a][0].call(r.exports,function(t){var c=e[a][1][t];return i(c||t)},r,r.exports,t,e,c,n)}return c[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({BaseModule:[function(t,e,c){"use strict";cc._RF.push(e,"c3cecZT5H5Lxa+3n8YUixiY","BaseModule"),cc.Class({extends:cc.Component,properties:{eventSwallowTouches:{default:[],type:cc.Component.EventHandler},eventReleaseTouches:{default:[],type:cc.Component.EventHandler},_swallowNode:null},init:function(){this._swallowNode=new cc.Node,this._swallowNode.setContentSize(cc.size(1920,1080)),this._swallowNode.setPosition(this.node.getPosition()),this.node.parent.addChild(this._swallowNode)},swallowTouches:function(){this._swallowNode||this.init(),this._swallowNode.on(cc.Node.EventType.TOUCH_START,function(){cc.log("SWALLOW TOUCHES WORK")},this),cc.Component.EventHandler.emitEvents(this.eventSwallowTouches,{data:"SWALLOW TOUCHES"}),cc.log("SWALLOW TOUCHES - "+this.name)},releaseTouches:function(){this._swallowNode||this.init(),this._swallowNode.off(cc.Node.EventType.TOUCH_START),cc.Component.EventHandler.emitEvents(this.eventReleaseTouches,{data:"RELEASE TOUCHES"}),cc.log("RELEASE TOUCHES - "+this.name)}}),cc._RF.pop()},{}],Bubble:[function(t,e,c){"use strict";cc._RF.push(e,"606c1MMnwtK65mHaM6spSuR","Bubble"),cc.Class({extends:cc.Component,properties:{}}),cc._RF.pop()},{}],Coin:[function(t,e,c){"use strict";cc._RF.push(e,"6f1bdmvDMFCuoi6XgsSscXm","Coin"),cc.Class({extends:cc.Component,properties:{prbBubble:{default:null,type:cc.Prefab},labNum:{default:null,type:cc.Label},labShadow:{default:null,type:cc.Label},dropSpeed:{default:200},coin:{default:null,type:cc.Node},coinToBalloon:{default:null,type:cc.AudioSource},_droped:!1},start:function(){},setNum:function(t){this.labNum.string=t,this.labShadow.string=t},dropAndBubble:function(){this._droped=!0,this.node.zIndex=1;var t=cc.v2(this.node.x,50);this.node.runAction(cc.sequence(cc.callFunc(function(){this.coin.opacity=0},this),cc.fadeIn(.1),cc.callFunc(function(){this.coin.runAction(cc.spawn(cc.scaleBy(.1,1.5).easing(cc.easeSineIn()),cc.fadeIn(.1)))},this),cc.delayTime(.5),cc.callFunc(function(){var t=cc.instantiate(this.prbBubble);this.node.addChild(t,1,1001),t.setPosition(cc.v2(0,-1e3-this.node.getPositionY())),t.scale=.5},this),cc.moveTo(2.2,t).easing(cc.easeQuadraticActionIn()),cc.callFunc(function(){this.coinToBalloon.play();var t=this.node.getChildByTag(1001);this.node.removeChild(this.coin),this.node.zIndex=2,t.addChild(this.coin),this.coin.runAction(cc.scaleTo(.1,3.5,3.5)),t.runAction(cc.spawn(cc.moveBy(.2,cc.v2(0,-200)),cc.scaleTo(.2,1,1).easing(cc.easeSineIn())))},this)))},blast:function(){this._droped&&(this.node.getChildByTag(1001).removeComponent(cc.PhysicsCircleCollider),this.node.getChildByTag(1001).removeComponent(cc.RigidBody),this.node.getChildByTag(1001).runAction(cc.sequence(cc.delayTime(.5*cc.random0To1()),cc.spawn(cc.scaleTo(.2,1.2,1.2),cc.fadeOut(.2)),cc.callFunc(function(){this.node.removeFromParent(),this.node.destroy()},this))))}}),cc._RF.pop()},{}],FlowEffect:[function(t,e,c){"use strict";cc._RF.push(e,"f574bxX3ahAsKf5MYfY3+qT","FlowEffect"),cc.Class({extends:cc.Component,properties:{ratio:1,enable:!0,_x:5},onLoad:function(){this._x+=100*cc.random0To1()},update:function(t){this.enable&&(this._x+=t,this.node.y+=Math.sin(this._x)*this.ratio)}}),cc._RF.pop()},{}],GameData:[function(t,e,c){"use strict";cc._RF.push(e,"a925eF25bxFWpa574jH5F6Z","GameData"),Array.prototype.contains=function(t){for(var e=0;e<this.length;e++)if(t==this[e])return!0;return!1},Array.prototype.shuffle=function(){for(var t=this,e=t.length,c=0;c<2*e;c++){var n=parseInt(Math.random()*e),i=parseInt(Math.random()*e),o=t[n];t[n]=t[i],t[i]=o}};var n=cc.Class({properties:{DATA_KEY:"GAME_DATA",dataModel:{default:null}},ctor:function(){this.readData()},readData:function(){var t=cc.sys.localStorage.getItem(this.DATA_KEY);t&&""!=t?this.dataModel=JSON.parse(t):(this.dataModel=this.defaultData(),cc.sys.localStorage.setItem(this.DATA_KEY,JSON.stringify(this.dataModel)))},defaultData:function(){var t={};return t.numMax=450,t.numOpend=[],t.numOpenPerTime=15,t.giftsNum=150,t.giftsOpend=[],t},getAllData:function(){return this.readData(),this.dataModel},setAllData:function(t){this.dataModel=t,cc.sys.localStorage.setItem(this.DATA_KEY,JSON.stringify(this.dataModel))},getNumMax:function(){return this.readData(),this.dataModel.numMax},getOpenPerTime:function(){return this.readData(),this.dataModel.numOpenPerTime},getNumOpend:function(){return this.readData(),this.dataModel.numOpend},addOpendNum:function(t){this.readData(),this.dataModel.numOpend.contains(t)?cc.error("此号码已被开出"):(this.dataModel.numOpend.push(t),cc.sys.localStorage.setItem(this.DATA_KEY,JSON.stringify(this.dataModel)))},getGiftsNum:function(){return this.readData(),this.dataModel.giftsNum},getGiftsOpend:function(){return this.readData(),this.dataModel.giftsOpend},addGiftOpend:function(t){this.readData(),this.dataModel.giftsOpend.contains(t)?cc.error("此奖品ID已开出"):(this.dataModel.giftsOpend.push(t),cc.sys.localStorage.setItem(this.DATA_KEY,JSON.stringify(this.dataModel)))},clear:function(){this.dataModel=this.defaultData(),cc.sys.localStorage.setItem(this.DATA_KEY,JSON.stringify(this.dataModel))}});cc.GAME_DATA=new n,cc._RF.pop()},{}],GiftsModule:[function(t,e,c){"use strict";cc._RF.push(e,"bebf0QefkVPkIFZ0klqTYRD","GiftsModule");var n=t("BaseModule");cc.Class({extends:n,properties:{prbScale:{default:null,type:cc.Prefab},prbGift:{default:null,type:cc.Prefab},giftsNode:{default:null,type:cc.Node},hoverNode:{default:null,type:cc.Node},BGM:{default:null,type:cc.AudioSource},_giftsIdArray:[],_isScalesInited:!1,_curGift:null},onLoad:function(){this.swallowTouches(),cc.log("礼物总数:"+this.giftsNode.children.length)},loadGifts:function(){var t=this;if(this._isScalesInited)this.setMaskEnabled(!0);else{this._isScalesInited=!0,this.swallowTouches();var e=cc.GAME_DATA.getGiftsOpend();cc.log("GIFTSOPEND:"+e);var c=new cc.Component.EventHandler;c.target=this.node,c.handler="onScaleOpen",c.component="GiftsModule";for(var n=1;n<=this.giftsNode.children.length;n++)this._giftsIdArray.push(n);this._giftsIdArray.shuffle(),this._giftsIdArray.shuffle(),cc.log("GIFTS ID SHUFFLED");var i=[];this.giftsNode.children.forEach(function(n,o){var a=cc.callFunc(function(){var t=cc.instantiate(this.prbScale);t.setPosition(n.getPosition()),t.getComponent("Scale").giftId=this._giftsIdArray[o],e.contains(this._giftsIdArray[o])&&t.getComponent("Scale").setOpened(),t.getComponent("Scale").onOpenedEvents.push(c),this.giftsNode.addChild(t),n.destroy()},t);i.push(a),i.push(cc.delayTime(.01))}),i.push(cc.callFunc(function(){this.releaseTouches()},this)),this.node.runAction(cc.sequence(i)),this.hoverNode=new cc.Node,this.hoverNode.zIndex=3,this.hoverNode._hitTest=function(t,e){return!0},this.giftsNode.addChild(this.hoverNode)}},onScaleOpen:function(t){cc.log("Scale Opened Id:"+t.giftId),cc.log("Scale Opened WORLD POS:"+t.pos);var e=this.node.convertToNodeSpaceAR(t.pos);cc.log("Scale Opened POS:"+e),cc.GAME_DATA.addGiftOpend(t.giftId),this.hoverNode.on(cc.Node.EventType.TOUCH_START,function(){cc.log("HOVER NODE WORK")},this);var c=cc.instantiate(this.prbScale);c.setPosition(e),c.getComponent(cc.Mask).enabled=!1,c.runAction(cc.sequence(cc.callFunc(function(){this.swallowTouches()},this),cc.spawn(cc.scaleTo(.01,1.2),cc.moveBy(.3,cc.v2(0,50)).easing(cc.easeSineOut())),cc.delayTime(.5),cc.spawn(cc.moveTo(.5,cc.v2(0,0)).easing(cc.easeSineOut()),cc.scaleTo(.5,2)),cc.delayTime(.3),cc.spawn(cc.fadeOut(.1),cc.scaleTo(.1,3)),cc.callFunc(function(){var e=new cc.Component.EventHandler;e.target=this.node,e.handler="onGiftConfirm",e.component="GiftsModule";var c=cc.instantiate(this.prbGift);c.getComponent("Gift").onConfirmEvents.push(e),c.getComponent("Gift").setGiftId(t.giftId),this.node.addChild(c),this._curGift=c,this._curGift.getComponent(cc.Animation).play().wrapMode=cc.WrapMode.Normal},this),cc.delayTime(2),cc.callFunc(function(){this.releaseTouches(),c.destroy()},this))),this.node.addChild(c)},onGiftConfirm:function(t){cc.log("Gift Confirmed Id:"+t.giftId),this._curGift=null,this.hoverNode.off(cc.Node.EventType.TOUCH_START)},setMaskEnabled:function(t){var e=this,c=[];this.giftsNode.children.forEach(function(n,i){n.getComponent(cc.Mask)&&(n.getComponent(cc.Mask).enabled=t);var o=cc.callFunc(function(){},e);c.push(o),c.push(cc.delayTime(.01))})},ON_NAVI_TO:function(){this.BGM.play(),this.releaseTouches(),this.node.getComponent(cc.Animation).play().wrapMode=cc.WrapMode.Normal,this.loadGifts(),cc.log("GIFTS ON NAVI TO")},ON_NAVI_OFF:function(){this.setMaskEnabled(!1),this.node.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(function(){this.BGM.stop()},this))),this.swallowTouches(),this.node.getComponent(cc.Animation).play().wrapMode=cc.WrapMode.Reverse,null!=this._curGift&&this._curGift.getComponent("Gift").btnConfirmClick(),cc.log("GIFTS ON NAVI OFF")}}),cc._RF.pop()},{BaseModule:"BaseModule"}],Gift:[function(t,e,c){"use strict";cc._RF.push(e,"28997XrPltHCYjKxQo7vt1O","Gift"),cc.Class({extends:cc.Component,properties:{textureNode:{default:null,type:cc.Node},nameNode:{default:null,type:cc.Node},btnConfirm:{default:null,type:cc.Button},labNum:{default:null,type:cc.Label},onConfirmEvents:{default:[],type:cc.Component.EventHandler},giftId:0},setGiftId:function(t){this.giftId=t,this.labNum.string="N"+t;var e=this;cc.loader.loadResDir("Gifts",cc.SpriteFrame,function(c,n){n.forEach(function(c){var n=parseInt(c.name.split("-")[0]),i=parseInt(c.name.split("-")[1]);t>=n&&t<=i&&(e.textureNode.getComponent(cc.Sprite).spriteFrame=c,cc.log(t+"图片切换成功."))})}),cc.loader.loadResDir("GiftNames",cc.SpriteFrame,function(c,n){n.forEach(function(c){var n=parseInt(c.name.split("-")[0]),i=parseInt(c.name.split("-")[1]);t>=n&&t<=i&&(e.nameNode.getComponent(cc.Sprite).spriteFrame=c,cc.log(t+"名称切换成功."))})})},btnConfirmClick:function(){this.btnConfirm.interactable=!1,this.emitConfirmEvents(),this.node.getComponent(cc.Animation).play().wrapMode=cc.WrapMode.Reverse,this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){this.node.destroy()},this)))},emitConfirmEvents:function(){var t={};t.giftId=this.giftId,cc.Component.EventHandler.emitEvents(this.onConfirmEvents,t)}}),cc._RF.pop()},{}],HisModule:[function(t,e,c){"use strict";cc._RF.push(e,"1bcb48CCotE1IltRc6ChRWg","HisModule");var n=t("BaseModule");cc.Class({extends:n,properties:{scrollView:{default:null,type:cc.ScrollView},scrollContentNode:{default:null,type:cc.Node},prbCoin:{default:null,type:cc.Prefab},BGM:{default:null,type:cc.AudioSource},allCoins:[]},onLoad:function(){this._scrollContentSize=this.scrollContentNode.getContentSize(),this.swallowTouches()},initHis:function(){var t=this,e=[],c=cc.GAME_DATA.getNumOpend(),n=c.length/15+2;this.scrollContentNode.setContentSize(cc.size(this._scrollContentSize.width,this._scrollContentSize.height+80*(n-5))),this.scrollView.scrollToTop(),c.forEach(function(c,n){var i={};i.index=n,i.value=c;var o=cc.callFunc(function(t,e){var c=parseInt(e.index/15),n=cc.instantiate(this.prbCoin);n.setPosition(cc.v2(e.index%15*60-420,-40-80*c)),n.getComponent("Coin").setNum(e.value),this.scrollContentNode.addChild(n),n.scale=.66,this.allCoins.push(n)},t,i);e.push(o),e.push(cc.delayTime(.01))}),e.length>1&&this.node.runAction(cc.sequence(e))},clearHsi:function(){this.allCoins.forEach(function(t,e){t.destroy()})},ON_NAVI_TO:function(){this.BGM.play(),this.releaseTouches(),this.initHis(),this.node.getComponent(cc.Animation).play().wrapMode=cc.WrapMode.Normal,cc.log("HIS ON NAVI TO")},ON_NAVI_OFF:function(){this.node.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(function(){this.BGM.stop()},this))),this.swallowTouches(),this.clearHsi(),this.node.getComponent(cc.Animation).play().wrapMode=cc.WrapMode.Reverse,cc.log("HIS ON NAVI OFF")}}),cc._RF.pop()},{BaseModule:"BaseModule"}],Judger:[function(t,e,c){"use strict";cc._RF.push(e,"59dc6qz+mlItrN1gQQA/D7D","Judger");var n=cc.Class({properties:{},randomInt:function(t,e){var c=(e=e<(t=t<1?1:t)?t+1:e)-t+1,n=cc.random0To1()*c,i=parseInt(n,10),o=i+t;return(o<t||o>e)&&cc.error("随机数开出错误!!! result:"+o+" min:"+t+" max:"+e+" randomFloat:"+n+" tempInt:"+i),o}});cc.JUDGER=new n,cc._RF.pop()},{}],LoadScene:[function(t,e,c){"use strict";cc._RF.push(e,"40fb5A71rNIE5U1X+Z95aEs","LoadScene"),cc.Class({extends:cc.Component,properties:{labPercent:{default:null,type:cc.Label},pump:{default:null,type:cc.Node},loadingSound:{default:null,type:cc.AudioSource},_curPercent:0,_targetPercent:10},onLoad:function(){cc.director.preloadScene("MainScene",function(){cc.log("MainScene preloaded.")})},start:function(){this.node.opacity=0,this.node.runAction(cc.sequence(cc.fadeIn(.3),cc.callFunc(function(){this.node.getComponent(cc.Animation).play(),this.pump.getComponent(cc.Animation).play()},this)))},update:function(t){this._curPercent<this._targetPercent&&(this._curPercent++,this.labPercent.string=this._curPercent+"%")},progressTo:function(t){this.loadingSound.play(),this._targetPercent=t,100===t&&this.node.runAction(cc.sequence(cc.delayTime(.45),cc.callFunc(function(){this.pump.getComponent(cc.Animation).stop()},this),cc.delayTime(.5),cc.fadeOut(.3),cc.callFunc(function(){this.startGame()},this)))},startGame:function(){cc.log("开始游戏！"),cc.director.loadScene("MainScene")}}),cc._RF.pop()},{}],MainScene:[function(t,e,c){"use strict";cc._RF.push(e,"280c3rsZJJKnZ9RqbALVwtK","MainScene"),cc.Class({extends:cc.Component,properties:{swallowNode:{default:null,type:cc.Node},labTip:{default:null,type:cc.Node},camera:{type:cc.Camera,default:null},widgets:cc.Node,planet:cc.Node,switchBG:cc.Node,startAniDur:3,planetSpinDur:3,modulePrepareDur:3,modules:{default:[],type:cc.Node},hisModule:{default:null,type:cc.Node},giftsModule:{default:null,type:cc.Node},prbSetting:{default:null,type:cc.Prefab},btnNum:{default:null,type:cc.Button},btnHis:{default:null,type:cc.Button},btnGifts:{default:null,type:cc.Button},BGM:{default:null,type:cc.AudioSource},BtnClickSound:{default:null,type:cc.AudioSource},_cameraZoomAni:!1,_currentModule:""},onLoad:function(){var t=this;this.hisModule.scale=.8,this.hisModule.setPosition(cc.v2(-867,-500)),this.giftsModule.scale=.8,this.giftsModule.setPosition(cc.v2(825,-479)),this.widgets.active=!1,this.camera.addTarget(this.widgets),this.camera.addTarget(this.planet),this.node.getChildByName("BG").on(cc.Node.EventType.MOUSE_DOWN,function(t){this.planet.getComponent("FlowEffect").enabled=!1,this.planet.runAction(cc.moveTo(1,cc.v2(0,0))),this.labTip.stopAllActions(),this.labTip.runAction(cc.fadeOut(.1)),this.startAni(),this.node.getChildByName("BG").off(cc.Node.EventType.MOUSE_DOWN)},this),cc.view.setResolutionPolicy(cc.ResolutionPolicy.SHOW_ALL),this.switchBG.children.forEach(function(t){t.active=!1}),this.modules.forEach(function(e){var c=e.getComponent(e.name),n=new cc.Component.EventHandler;n.target=t.node,n.component="MainScene",n.handler="sceneSwallTouches",c.eventSwallowTouches.push(n);var i=new cc.Component.EventHandler;i.target=t.node,i.component="MainScene",i.handler="sceneReleaTouches",c.eventReleaseTouches.push(i)}),this.node.opacity=0,this.node.runAction(cc.fadeIn(1)),this.labTip.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(1,50),cc.fadeTo(1,255))))},sceneSwallTouches:function(){this.swallowNode.on(cc.Node.EventType.TOUCH_START,function(){cc.log("MAIN SCENE SWALLOW TOUCHES WORK.")}),cc.log("MAIN SCENE SWALLOW TOUCHES")},sceneReleaTouches:function(){this.swallowNode.off(cc.Node.EventType.TOUCH_START),cc.log("MAIN SCENE RELEASE TOUCHES")},startAni:function(){this.node.runAction(cc.sequence(cc.callFunc(function(){this.planet.runAction(cc.rotateTo(1.5,0).easing(cc.easeSineOut()))},this),cc.delayTime(2),cc.callFunc(function(){this.node.getChildByName("BG").runAction(cc.spawn(cc.scaleTo(this.startAniDur,1.2,1.2),cc.moveBy(this.startAniDur,cc.v2(0,20)))),this._cameraZoomAni=!0,this.camera.node.runAction(cc.moveTo(this.startAniDur,cc.v2(0,1080)).easing(cc.easeSineOut()))},this),cc.delayTime(this.startAniDur+.5),cc.callFunc(function(){this.widgets.active=!0,this.widgets.runAction(cc.moveBy(.5,cc.v2(0,120)).easing(cc.easeSineOut())),this.tabControlDisable(this.btnNum),this.BGM.stop(),this.emitNaviTo("NumModule"),this.hisModule.scale=1,this.giftsModule.scale=1,this.giftsModule.setPosition(cc.v2(935,-542)),this.hisModule.setPosition(cc.v2(-936,-540))},this)))},update:function(t){if(this._cameraZoomAni){var e=.7/(60*this.startAniDur);this.camera.zoomRatio+=e,this.camera.zoomRatio=this.camera.zoomRatio>1?1:this.camera.zoomRatio,this._cameraZoomAni=1!=this.camera.zoomRatio&&this._cameraZoomAni}},btnClickChangeScreen:function(t,e){this.BtnClickSound.play();var c;switch(e){case"NumModule":c=cc.rotateTo(this.planetSpinDur,0).easing(cc.easeSineOut()),this.tabControlDisable(this.btnNum);break;case"GiftsModule":c=cc.rotateTo(this.planetSpinDur,240).easing(cc.easeSineOut()),this.tabControlDisable(this.btnGifts);break;case"HisModule":c=cc.rotateTo(this.planetSpinDur,120).easing(cc.easeSineOut()),this.tabControlDisable(this.btnHis)}this.emitNaviOff(e),this.planet.stopAllActions(),this.planet.runAction(cc.sequence(cc.delayTime(this.modulePrepareDur),c,cc.callFunc(function(){this.emitNaviTo(e)},this)))},tabControlDisable:function(t){this.btnNum.interactable=!0,this.btnGifts.interactable=!0,this.btnHis.interactable=!0,t.interactable=!1},settingClick:function(){this.BtnClickSound.play();var t=cc.instantiate(this.prbSetting);t.zIndex=99999,t.setPosition(cc.v2(0,0)),this.node.addChild(t)},emitNaviTo:function(t){this.modules.forEach(function(e){if(e.name==t){var c=e.getComponent(t);c&&c.ON_NAVI_TO&&c.ON_NAVI_TO()}}),this._currentModule=t;var e=this.switchBG.getChildByName(t+"BG");e&&(e.active=!0,e.stopAllActions(),e.getComponent(cc.Animation).play("In").wrapMode=cc.WrapMode.Normal,e.runAction(cc.sequence(cc.delayTime(this.modulePrepareDur),cc.callFunc(function(){this.getComponent(cc.Animation).play("Static")},e))))},emitNaviOff:function(t){var e=this;this.modules.forEach(function(t){if(t.name==e._currentModule){var c=t.getComponent(t.name);c&&c.ON_NAVI_OFF&&c.ON_NAVI_OFF()}});var c=this.switchBG.getChildByName(this._currentModule+"BG");c&&(c.stopAllActions(),c.getComponent(cc.Animation).play("In").wrapMode=cc.WrapMode.Reverse,c.runAction(cc.sequence(cc.delayTime(this.modulePrepareDur),cc.callFunc(function(){this.active=!1},c))))}}),cc._RF.pop()},{}],NumModule:[function(t,e,c){"use strict";cc._RF.push(e,"24b67GfB9JFpZFVzmeYznA0","NumModule");var n=t("BaseModule");cc.Class({extends:n,properties:{prbCoin:{default:null,type:cc.Prefab},treeNode:{default:null,type:cc.Node},numsNode:{default:null,type:cc.Node},btnStart:{default:null,type:cc.Node},blackMask:{default:null,type:cc.Node},BGM:{default:null,type:cc.AudioSource},BtnStartSound:{default:null,type:cc.AudioSource},_allCoins:[],_dropedCoins:[],_numsInited:!1},onLoad:function(){this.btnStart.getComponent(cc.Button).interactable=!1,this.swallowTouches(),this.blackMask.opacity=0,cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().enabledAccumulator=!0,cc.director.getPhysicsManager().gravity=cc.v2(0,444),this.treeNode.getChildByName("leaf_pre").zIndex=1},initNums:function(){if(!this._numsInited){cc.log("GAME_DATA.getNumMax()"+cc.GAME_DATA.getNumMax());var t=cc.GAME_DATA.getNumOpend();t.sort(function(t,e){return t-e}),cc.log("GAME_DATA.getNumOpend()"+t);var e=cc.GAME_DATA.getNumMax();if(this._numsInited=!0,e!==t.length){this.btnStart.getComponent(cc.Animation).play("btnStartFlipToLoading").wrapMode=cc.WrapMode.Normal,this.swallowTouches();var c=[];c.push(cc.delayTime(2)),c.push(cc.callFunc(function(){this.blackMask.runAction(cc.fadeTo(.3,200))},this));for(var n=1;n<=e;n++)if(!t.contains(n)){var i=cc.callFunc(function(t,e){var c=parseInt((e-1)/30),n=cc.instantiate(this.prbCoin);n.setPosition(cc.v2((e-1)%30*55-800,55*c-380)),n.getComponent("Coin").setNum(e),this.numsNode.addChild(n),n.scale=1,n.rotation=-45,this._allCoins[e]=n;var i=.016666666*e;n.runAction(cc.sequence(cc.spawn(cc.scaleTo(.3,.6),cc.rotateTo(.3,0)),cc.delayTime(3+i),cc.callFunc(function(){var t=this.numsNode.convertToWorldSpaceAR(n.getPosition());this.numsNode.removeChild(n),this.treeNode.addChild(n),n.setPosition(this.treeNode.convertToNodeSpaceAR(t)),n.zIndex=3;var e=[cc.p(0,0),cc.p(-900,900),cc.v2(-500,-100)],c=cc.bezierTo(1,e);e=[cc.p(0,0),cc.p(1e3,0),cc.v2(300*cc.random0To1()-150,500)];var i=cc.bezierTo(1,e);n.runAction(cc.spawn(cc.scaleTo(.3,.8),cc.rotateTo(1.5,-720),cc.sequence(c,cc.callFunc(function(){n.zIndex=0},this),i,cc.delayTime(.3),cc.callFunc(function(){n.active=!1},this))))},this)))},this,n);c.push(i),c.push(cc.delayTime(.02))}this.node.runAction(cc.sequence(cc.delayTime(7),cc.callFunc(function(){this.blackMask.runAction(cc.fadeOut(1)),this.treeNode.getComponent(cc.Animation).play("TreeInit")},this)));var o=cc.callFunc(function(){this.releaseTouches(),this.treeNode.getComponent(cc.Animation).stop("TreeInit"),this.btnStart.getComponent(cc.Animation).play("btnStartFlipToLoading").wrapMode=cc.WrapMode.Reverse,this.btnStart.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.btnStart.getComponent(cc.Button).interactable=!0},this)))},this);c.push(cc.delayTime(.016666666*e+5.5)),c.push(o),c.length>1&&this.node.runAction(cc.sequence(c))}else this.btnStart.getComponent(cc.Button).interactable=!0}},ON_NAVI_TO:function(){this.BGM.play(),this.releaseTouches(),this._numsInited&&this.btnStart.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.btnStart.getComponent(cc.Button).interactable=!0},this))),this.initNums(),this.node.getComponent(cc.Animation).play("NaviTo").wrapMode=cc.WrapMode.Normal,cc.log("NUM ON NAVI TO")},ON_NAVI_OFF:function(){this.node.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(function(){this.BGM.stop()},this))),this.swallowTouches(),this.btnStart.getComponent(cc.Button).interactable=!1,this.dropedBlast(),this.node.getComponent(cc.Animation).play("NaviTo").wrapMode=cc.WrapMode.Reverse,cc.log("NUM ON NAVI OFF")},dropedBlast:function(){this._dropedCoins.forEach(function(t){t.getComponent("Coin").blast()}),this._dropedCoins=[]},openNewNum:function(){var t=cc.GAME_DATA.getNumMax(),e=cc.GAME_DATA.getNumOpend(),c=0;do{c=cc.JUDGER.randomInt(1,t)}while(e.contains(c)&&e.length<t);return 0!=(c=e.length==t?0:c)&&cc.GAME_DATA.addOpendNum(c),c},btnStartClick:function(t){this.BtnStartSound.play(),this.dropedBlast(),this.swallowTouches();var e=cc.GAME_DATA.getOpenPerTime(),c=cc.GAME_DATA.getNumMax(),n=cc.GAME_DATA.getNumOpend();e=e>c-n.length?c-n.length:e,this.btnStart.getComponent(cc.Button).interactable=!1,this.btnStart.getComponent(cc.Animation).play("btnStartFlipToRunning").wrapMode=cc.WrapMode.Normal,this.treeNode.getComponent(cc.Animation).play("TreeRock");for(var i=0;i<e;i++){var o=i;this.node.runAction(cc.sequence(cc.delayTime(2*o),cc.callFunc(function(){var t=this.openNewNum();this._allCoins[t]&&(this._allCoins[t].active=!0,this._allCoins[t].rotation=0,this._allCoins[t].scale=.6,this._allCoins[t].getComponent("Coin").dropAndBubble(),this._dropedCoins.push(this._allCoins[t]),this._allCoins[t]=null)},this)))}this.node.runAction(cc.sequence(cc.delayTime(2*e),cc.callFunc(function(){this.treeNode.getComponent(cc.Animation).stop("TreeRock")},this),cc.delayTime(3),cc.callFunc(function(){this.releaseTouches(),this.btnStart.getComponent(cc.Animation).play("btnStartFlipToRunning").wrapMode=cc.WrapMode.Reverse,this.btnStart.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.btnStart.getComponent(cc.Button).interactable=!0},this)))},this)))}}),cc._RF.pop()},{BaseModule:"BaseModule"}],Scale:[function(t,e,c){"use strict";cc._RF.push(e,"2e32fNEC0BGNoILcuudttGp","Scale"),cc.Class({extends:cc.Component,properties:{onOpenedEvents:{default:[],type:cc.Component.EventHandler},lightNode:{default:null,type:cc.Node},giftId:0,_isOpened:!1},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCanel,this)},start:function(){this._isOpened&&this.node.runAction(cc.sequence(cc.delayTime(.1),cc.callFunc(function(){this.node.getComponent(cc.Animation).stop("Spark"),this.node.getChildByName("scaleOpened").active=!0,this.lightNode.active=!1},this)))},setOpened:function(){this._isOpened=!0,this.node.getComponent(cc.Animation).stop("Spark"),this.node.getChildByName("scaleOpened").active=!0,this.lightNode.active=!1},touchStart:function(t){this.node.scale=.9},touchEnd:function(t){this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.delayTime(.05),cc.scaleTo(.05,1,1))),this._isOpened||(this._isOpened=!0,this.setOpened(),this.emitOpenEvents())},touchCanel:function(t){this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.delayTime(.05),cc.scaleTo(.05,1,1)))},emitOpenEvents:function(){var t={};t.giftId=this.giftId,t.pos=this.node.parent.convertToWorldSpaceAR(this.node.getPosition()),cc.Component.EventHandler.emitEvents(this.onOpenedEvents,t)}}),cc._RF.pop()},{}],Setting:[function(t,e,c){"use strict";cc._RF.push(e,"49d8aNwz6pHZrzjEE78ONHB","Setting"),cc.Class({extends:cc.Component,properties:{txtNumMax:{default:null,type:cc.EditBox},txtOpenPerTime:{default:null,type:cc.EditBox},confirmPnl:{default:null,type:cc.Node},btnClear:{default:null,type:cc.Node},_gameData:null},onLoad:function(){this.node.getChildByName("HoverNode").on(cc.Node.EventType.TOUCH_START,function(){},this),this.init()},init:function(){this._gameData=cc.GAME_DATA.getAllData(),this.txtNumMax.string=this._gameData.numMax,this.txtOpenPerTime.string=this._gameData.numOpenPerTime},clear:function(){this.btnClear.getComponent(cc.Button).interactable=!1,this.confirmPnl.active=!0,this.confirmPnl.opacity=0,this.confirmPnl.runAction(cc.fadeIn(.1))},btnCancelClear:function(){this.btnClear.getComponent(cc.Button).interactable=!0,this.confirmPnl.active=!1},btnConfirmClear:function(){this.btnClear.getComponent(cc.Button).interactable=!0,this.btnClear.interactable=!0,this.confirmPnl.active=!1,cc.GAME_DATA.clear(),this.close()},save:function(){this._gameData.numMax=parseInt(this.txtNumMax.string,10),this._gameData.numOpenPerTime=parseInt(this.txtOpenPerTime.string,10),cc.GAME_DATA.setAllData(this._gameData),this.close()},numMaxAdd:function(){this._gameData.numMax+=1,this.txtNumMax.string=this._gameData.numMax},numMaxMinus:function(){this._gameData.numMax-=1,this._gameData.numMax<1||this._gameData.numMax,this.txtNumMax.string=this._gameData.numMax},numOpenPerTimeAdd:function(){this._gameData.numOpenPerTime+=1,this.txtOpenPerTime.string=this._gameData.numOpenPerTime},numOpenPerTimeMinus:function(){this._gameData.numOpenPerTime-=1,this._gameData.numOpenPerTime<1||this._gameData.numOpenPerTime,this.txtOpenPerTime.string=this._gameData.numOpenPerTime},close:function(){this.node.removeFromParent(),this.node.destroy()}}),cc._RF.pop()},{}],UpdateNumOpend:[function(t,e,c){"use strict";cc._RF.push(e,"c07d3Uv+i9AbZrt4tOtX7j9","UpdateNumOpend"),cc.Class({extends:cc.Component,properties:{},start:function(){this.node.getComponent(cc.Label).string=cc.GAME_DATA.getNumOpend().length,this.schedule(function(){this.node.getComponent(cc.Label).string=cc.GAME_DATA.getNumOpend().length},1)}}),cc._RF.pop()},{}]},{},["BaseModule","Gift","GiftsModule","Scale","HisModule","Bubble","Coin","NumModule","Setting","LoadScene","MainScene","FlowEffect","GameData","Judger","UpdateNumOpend"]);